{% extends "base_club_dashboard.html" %}
{% block content %}
<div class="{% if LANGUAGE_CODE == 'ar' %}xl:pr-[20%]{% else %}xl:pl-[20%]{% endif %} bg-rose-50 w-full px-4 md:px-8 min-h-screen pb-12 overflow-hidden">
    <!-- Title and back button -->
    <div class="flex justify-between items-center py-8 animate-fade-in">
        <h1 class=" mr-2 text-4xl font-bold text-rose-800 transform transition-all duration-500 opacity-0 animate-title">
            {% if LANGUAGE_CODE == 'ar' %} تفاصيل طلب التاجر {% else %} Vendor Application Details {% endif %}
        </h1>
        <div class="flex space-x-2">
            <a href="{% url 'vendor_approval_list' %}" class="ml-2 bg-amber-500 text-white px-6 py-2 rounded-lg hover:bg-amber-600 transition-all duration-300 transform opacity-0 animate-button shadow-md hover:shadow-amber-300/40">
                {% if LANGUAGE_CODE == 'ar' %} العودة إلى القائمة {% else %} Back to List {% endif %}
            </a>
        </div>
    </div>

    <!-- Main content -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 opacity-0 animate-fade-in" style="animation-delay: 0.3s">
        <!-- Left column - Vendor info -->
        <div class="bg-white/90 backdrop-blur-sm rounded-xl shadow-lg p-6 lg:col-span-2">
            <div class="flex flex-col md:flex-row items-start md:items-center gap-6 mb-6">
                {% if vendor.profile_image_base64 %}
                <img src="data:image/png;base64,{{ vendor.profile_image_base64 }}" class="w-24 h-24 rounded-full object-cover" alt="{{ vendor.full_name }}">
                {% else %}
                <div class="w-24 h-24 rounded-full bg-rose-100 flex items-center justify-center">
                    <svg class="w-12 h-12 text-rose-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                </div>
                {% endif %}
                <div>
                    <h2 class="text-2xl font-bold text-rose-900">{{ vendor.full_name }}</h2>
                    <p class="text-amber-600">{{ vendor.business_name }}</p>
                    <div class="mt-2">
                        <span class="px-3 py-1 bg-amber-100 text-amber-800 rounded-full text-sm">
                            {% if LANGUAGE_CODE == 'ar' %} قيد الانتظار {% else %} Pending {% endif %}
                        </span>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div class="bg-rose-50 p-4 rounded-lg">
                    <h3 class="font-bold text-rose-800 mb-2">{% if LANGUAGE_CODE == 'ar' %} معلومات الاتصال {% else %} Contact Info {% endif %}</h3>
                    <div class="space-y-2">
                        <p><span class="font-medium">{% if LANGUAGE_CODE == 'ar' %} الهاتف: {% else %} Phone: {% endif %}</span> {{ vendor.phone }}</p>
                        <p><span class="font-medium">{% if LANGUAGE_CODE == 'ar' %} البريد: {% else %} Email: {% endif %}</span> {{ vendor.email }}</p>
                        <p><span class="font-medium">{% if LANGUAGE_CODE == 'ar' %} النشاط: {% else %} Activity: {% endif %}</span> {{ vendor.get_activity_type_display }}</p>
                    </div>
                </div>

                <div class="bg-rose-50 p-4 rounded-lg">
                    <h3 class="font-bold text-rose-800 mb-2">{% if LANGUAGE_CODE == 'ar' %} العنوان {% else %} Address {% endif %}</h3>
                    <div class="space-y-2">
                        <p><span class="font-medium">{% if LANGUAGE_CODE == 'ar' %} المدينة: {% else %} City: {% endif %}</span> {{ vendor.city }}</p>
                        <p><span class="font-medium">{% if LANGUAGE_CODE == 'ar' %} الحي: {% else %} District: {% endif %}</span> {{ vendor.district }}</p>
                        <p><span class="font-medium">{% if LANGUAGE_CODE == 'ar' %} الشارع: {% else %} Street: {% endif %}</span> {{ vendor.street }}</p>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <h3 class="font-bold text-rose-800 mb-2">{% if LANGUAGE_CODE == 'ar' %} وصف الخدمة {% else %} Service Description {% endif %}</h3>
                <div class="bg-rose-50 p-4 rounded-lg">
                    {{ vendor.description|default:"لا يوجد وصف"|linebreaks }}
                </div>
            </div>

            <!-- Business Documents -->
            <div>
                <h3 class="font-bold text-rose-800 mb-2">{% if LANGUAGE_CODE == 'ar' %} المستندات التجارية {% else %} Business Documents {% endif %}</h3>
                <div class="bg-rose-50 p-4 rounded-lg">
                    <p class="mb-2"><span class="font-medium">{% if LANGUAGE_CODE == 'ar' %} نوع الوثيقة: {% else %} Document Type: {% endif %}</span>
                        {{ vendor.get_business_document_type_display|default:"لم يتم توفير وثيقة" }}
                    </p>

                    {% if vendor.business_document_file %}
                    <div class="mt-3">
                        <a href="data:application/pdf;base64,{{ vendor.business_document_file }}"
                           target="_blank"
                           download="business_document.pdf"
                           class="inline-flex items-center px-4 py-2 bg-rose-600 text-white rounded-md hover:bg-rose-700 transition">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            {% if LANGUAGE_CODE == 'ar' %} عرض الوثيقة {% else %} View Document {% endif %}
                        </a>
                    </div>
                    {% else %}
                    <p class="text-amber-600">{% if LANGUAGE_CODE == 'ar' %} لم يتم تحميل أي وثيقة {% else %} No document uploaded {% endif %}</p>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Right column - Approval actions -->
        <div class="bg-white/90 backdrop-blur-sm rounded-xl shadow-lg p-6">
            <h2 class="text-xl font-bold text-rose-800 mb-4">{% if LANGUAGE_CODE == 'ar' %} إجراء الموافقة {% else %} Approval Action {% endif %}</h2>

            <form method="post" action="{% url 'vendor_approval_action' vendor.id %}">
                {% csrf_token %}
                <div class="mb-6">
                    <label class="block font-medium text-amber-900 mb-3">{% if LANGUAGE_CODE == 'ar' %} اختر الإجراء: {% else %} Select Action: {% endif %}</label>
                    <div class="space-y-3">
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="radio" name="action" value="approve" class="form-radio h-5 w-5 text-green-500" required>
                            <div>
                                <span class="block font-medium text-green-800">{% if LANGUAGE_CODE == 'ar' %} موافقة {% else %} Approve {% endif %}</span>
                                <span class="block text-sm text-green-600">{% if LANGUAGE_CODE == 'ar' %} سيتم إنشاء حساب للتاجر {% else %} Will create vendor account {% endif %}</span>
                            </div>
                        </label>

                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="radio" name="action" value="reject" class="form-radio h-5 w-5 text-rose-500">
                            <div>
                                <span class="block font-medium text-rose-800">{% if LANGUAGE_CODE == 'ar' %} رفض {% else %} Reject {% endif %}</span>
                                <span class="block text-sm text-rose-600">{% if LANGUAGE_CODE == 'ar' %} لن يتم إنشاء حساب {% else %} No account will be created {% endif %}</span>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="mb-6">
                    <label for="notes" class="block font-medium text-amber-900 mb-2">{% if LANGUAGE_CODE == 'ar' %} ملاحظات: {% else %} Notes: {% endif %}</label>
                    <textarea id="notes" name="notes" rows="4" class="w-full px-3 py-2 border border-rose-200 rounded-md focus:outline-none focus:ring-2 focus:ring-rose-500" placeholder="{% if LANGUAGE_CODE == 'ar' %} ملاحظات إضافية (اختياري) {% else %} Additional notes (optional) {% endif %}"></textarea>
                </div>

                <div class="flex justify-end space-x-3">
                    <a href="{% url 'vendor_approval_list' %}" class="ml-2 px-4 py-2 border border-rose-300 text-rose-700 rounded-md hover:bg-rose-50 transition">
                        {% if LANGUAGE_CODE == 'ar' %} إلغاء {% else %} Cancel {% endif %}
                    </a>
                    <button type="submit" class="px-4 py-2 bg-rose-600 text-white rounded-md hover:bg-rose-700 transition">
                        {% if LANGUAGE_CODE == 'ar' %} تأكيد الإجراء {% else %} Confirm Action {% endif %}
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
    /* Animation effects - same as vendor_approval_list.html */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes titleIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .animate-fade-in {
      animation: fadeIn 0.8s ease-out forwards;
    }

    .animate-title {
      animation: titleIn 0.8s ease-out 0.3s forwards;
    }

    .animate-button {
      animation: fadeIn 0.8s ease-out 0.4s forwards;
    }
</style>
{% endblock %}