{% extends "base_club_dashboard.html" %}
{% load static %}
{% block title %}
{% if LANGUAGE_CODE == 'ar' %}
✨ مواعيد الفترة - {{ day }} {{ time_slot }}
{% else %}
✨ Slot Appointments - {{ day }} {{ time_slot }}
{% endif %}
{% endblock %}

{% block content %}
<style>
    /* Reusing animations from the dashboard */
    .animate-float {
        animation: float 4s ease-in-out infinite;
    }
    .animate-fadeIn {
        animation: fadeIn 0.6s ease-out forwards;
        opacity: 0;
    }
    .animate-fadeInUp {
        animation: fadeInUp 0.8s ease-out forwards;
        opacity: 0;
    }
    .animate-fadeInRight {
        animation: fadeInRight 0.5s ease-out forwards;
        opacity: 0;
    }
    .btn-gradient {
        background-size: 200% auto;
        transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    .btn-gradient:hover {
        background-position: right center;
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
    }
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }
    @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-8px); }
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateX(10px); }
        to { opacity: 1; transform: translateX(0); }
    }
    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeInRight {
        from { opacity: 0; transform: translateX(20px); }
        to { opacity: 1; transform: translateX(0); }
    }
    .animated-bg {
        animation: gradientBG 15s ease infinite;
        background-size: 300% 300%;
    }
    @keyframes gradientBG {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }
</style>

<section class="{% if LANGUAGE_CODE == 'ar' %}xl:pr-[20%]{% else %}xl:pl-[20%]{% endif %} animated-bg bg-gradient-to-br from-blue-50 to-purple-50 w-full min-h-screen py-12 px-4 md:px-8">
    <div class="container mx-auto px-4 py-8">
        <div class="bg-white shadow-lg rounded-xl overflow-hidden border border-gray-100 animate-[fadeInDown_0.8s_ease-out]">
            <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-4 rounded-t-lg">
                <div class="flex items-center justify-between">
                    <h1 class="text-xl font-bold">
                        {% if LANGUAGE_CODE == 'ar' %}
                        📅 مواعيد يوم {{ day }} - {{ time_slot }}
                        {% else %}
                        📅 Appointments for {{ day }} - {{ time_slot }}
                        {% endif %}
                    </h1>
                    <a href="{% url 'club_salon_appointments' %}" class="btn-gradient bg-gradient-to-r from-gray-100 to-gray-200 text-blue-600 px-4 py-2 rounded-lg transition-all duration-300 flex items-center gap-2">
                        {% if LANGUAGE_CODE == 'ar' %}
                        ↩️ العودة للجدول
                        {% else %}
                        ↩️ Back to Schedule
                        {% endif %}
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </a>
                </div>
            </div>

            <div class="p-6">
                {% if appointments %}
                <div class="mb-6 animate-[fadeIn_0.8s_ease-out_0.1s_both]">
                    <h2 class="text-lg font-semibold mb-4 text-blue-600">
                        {% if LANGUAGE_CODE == 'ar' %}
                        👥 عدد المواعيد في هذه الفترة: {{ appointments|length }}
                        {% else %}
                        👥 Number of appointments in this slot: {{ appointments|length }}
                        {% endif %}
                    </h2>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {% for appointment in appointments %}
                        <div class="stat-card flex flex-col rounded-xl bg-white p-6 shadow-lg transition-all duration-300 border border-gray-100 animate-[fadeInRight_0.5s_ease-out_{{ forloop.counter|add:0.2 }}s_both]">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-semibold text-gray-800">{{ appointment.student_name }}</h3>
                                <span class="text-sm text-gray-600">{{ appointment.start_time }} - {{ appointment.end_time }}</span>
                            </div>
                            <div class="mb-3">
                                <span class="font-semibold text-blue-600">
                                    {% if LANGUAGE_CODE == 'ar' %}الخدمات:{% else %}Services:{% endif %}
                                </span>
                                <span class="text-gray-600">{{ appointment.services }}</span>
                            </div>
                            <div class="mb-3">
                                <span class="font-semibold text-blue-600">
                                    {% if LANGUAGE_CODE == 'ar' %}المدرب:{% else %}Employee:{% endif %}
                                </span>
                                <span class="text-gray-600">{{ appointment.employee }}</span>
                            </div>
                            {% if request.user.userprofile.director_profile %}
                            <div class="mb-3">
                                <span class="font-semibold text-blue-600">
                                    {% if LANGUAGE_CODE == 'ar' %}السعر الإجمالي:{% else %}Total Price:{% endif %}
                                </span>
                                <span class="text-gray-600">
                                    {% if LANGUAGE_CODE == 'ar' %}{{ appointment.total_price }} ريال{% else %}{{ appointment.total_price }} SAR{% endif %}
                                </span>
                            </div>
                            {% endif %}
                            <div class="flex justify-end mt-auto gap-2">
                                <a href="{% url 'director_appointment_details' appointment.id %}" class="btn-gradient bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2 rounded-lg transition-all duration-300 flex items-center gap-2">
                                    {% if LANGUAGE_CODE == 'ar' %}🔍 التفاصيل{% else %}🔍 Details{% endif %}
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                </a>
                                <a href="{% url 'director_cancel_appointment' appointment.id %}" class="btn-gradient bg-gradient-to-r from-red-500 to-red-600 text-white px-4 py-2 rounded-lg transition-all duration-300 flex items-center gap-2" onclick="return confirm('{% if LANGUAGE_CODE == 'ar' %}هل أنت متأكد من إلغاء هذا الحجز؟{% else %}Are you sure you want to cancel this appointment?{% endif %}');">
                                    {% if LANGUAGE_CODE == 'ar' %}إلغاء{% else %}Cancel{% endif %}
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </a>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% else %}
                <div class="text-center py-8 animate-[fadeIn_0.8s_ease-out_0.5s_both]">
                    <div class="flex flex-col items-center justify-center">
                        <svg class="w-16 h-16 text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <h2 class="text-xl font-semibold text-gray-700">
                            {% if LANGUAGE_CODE == 'ar' %}لا توجد مواعيد في هذه الفترة{% else %}No appointments in this period{% endif %}
                        </h2>
                        <p class="text-gray-500 mt-2">
                            {% if LANGUAGE_CODE == 'ar' %}لم يتم تسجيل أي مواعيد لهذه الفترة بعد{% else %}No appointments have been scheduled for this slot yet{% endif %}
                        </p>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    // Add any additional JavaScript here if needed
</script>
{% endblock %}